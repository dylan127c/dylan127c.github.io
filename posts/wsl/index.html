<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>WSL | Think</title>
<meta name="keywords" content="Windows Subsystem, Virtual Machine, Linux, Ubuntu">
<meta name="description" content="概述 Windows Subsystem for Linux（WSL）全称适用于 Linux 的 Windows 子系统。
WSL 可以让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。详情参考：WSL 文档。
虚拟化技术 WSL 依赖于虚拟化技术，需要在 Windows 功能中启用 Hyper-V 功能和虚拟机平台功能，请参考：虚拟化技术。
安装 WSL 与其说是安装 WSL 程序，倒不如说是为 WSL 程序选择安装适合的 Linux 发行版（Linux Distribution）。对于大多数 Windows 10 或以上版本的系统来说，它们都已经默认支持 WSL 了。
可以通过系统版本的方式，来判断目前系统支持的 WSL 版本有什么。目前 WSL 分为 WSL1 和 WSL2，就性能表现来说，推荐使用 WSL2。
打开命令提示符 CMD 程序（不能用 PowerShell）运行以下命令：
ver 可以得到当前系统的版本信息：
如果版本号低于 18917 则表示当前系统只支持 WSL1，如果高于 18917 则表示系统同时支持 WSL1 和 WSL2。
上述例子中，版本号为 22621 就表示当前系统同时支持 WSL1 和 WSL2。
WSL 程序默认存储在 C:\Windows\System32 目录中：">
<meta name="author" content="dylan">
<link rel="canonical" href="https://dylan127c.github.io/posts/wsl/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.eddf3fb605328bdcc3bebdfcc183268fffbd9d88fb4a11fc74a5362696c5a61c.css" integrity="sha256-7d8/tgUyi9zDvr38wYMmj/&#43;9nYj7ShH8dKU2JpbFphw=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://dylan127c.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://dylan127c.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://dylan127c.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://dylan127c.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://dylan127c.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="/css/lightgallery.min.css">



<script src="/js/mermaid.min.js"></script>
<script>
    
    const config = {
        startOnLoad: true,
        theme: 'forest',
        themeVariables: {
            lineColor: "#ff8033" 
        },
        flowchart: {
            useMaxWidth: false,
            htmlLabels: true
        }
    };
    
    mermaid.initialize(config);
    
    
    window.onload = () => {
        window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
    }
</script><meta property="og:title" content="WSL" />
<meta property="og:description" content="概述 Windows Subsystem for Linux（WSL）全称适用于 Linux 的 Windows 子系统。
WSL 可以让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。详情参考：WSL 文档。
虚拟化技术 WSL 依赖于虚拟化技术，需要在 Windows 功能中启用 Hyper-V 功能和虚拟机平台功能，请参考：虚拟化技术。
安装 WSL 与其说是安装 WSL 程序，倒不如说是为 WSL 程序选择安装适合的 Linux 发行版（Linux Distribution）。对于大多数 Windows 10 或以上版本的系统来说，它们都已经默认支持 WSL 了。
可以通过系统版本的方式，来判断目前系统支持的 WSL 版本有什么。目前 WSL 分为 WSL1 和 WSL2，就性能表现来说，推荐使用 WSL2。
打开命令提示符 CMD 程序（不能用 PowerShell）运行以下命令：
ver 可以得到当前系统的版本信息：
如果版本号低于 18917 则表示当前系统只支持 WSL1，如果高于 18917 则表示系统同时支持 WSL1 和 WSL2。
上述例子中，版本号为 22621 就表示当前系统同时支持 WSL1 和 WSL2。
WSL 程序默认存储在 C:\Windows\System32 目录中：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dylan127c.github.io/posts/wsl/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-04-23T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="WSL"/>
<meta name="twitter:description" content="概述 Windows Subsystem for Linux（WSL）全称适用于 Linux 的 Windows 子系统。
WSL 可以让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。详情参考：WSL 文档。
虚拟化技术 WSL 依赖于虚拟化技术，需要在 Windows 功能中启用 Hyper-V 功能和虚拟机平台功能，请参考：虚拟化技术。
安装 WSL 与其说是安装 WSL 程序，倒不如说是为 WSL 程序选择安装适合的 Linux 发行版（Linux Distribution）。对于大多数 Windows 10 或以上版本的系统来说，它们都已经默认支持 WSL 了。
可以通过系统版本的方式，来判断目前系统支持的 WSL 版本有什么。目前 WSL 分为 WSL1 和 WSL2，就性能表现来说，推荐使用 WSL2。
打开命令提示符 CMD 程序（不能用 PowerShell）运行以下命令：
ver 可以得到当前系统的版本信息：
如果版本号低于 18917 则表示当前系统只支持 WSL1，如果高于 18917 则表示系统同时支持 WSL1 和 WSL2。
上述例子中，版本号为 22621 就表示当前系统同时支持 WSL1 和 WSL2。
WSL 程序默认存储在 C:\Windows\System32 目录中："/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://dylan127c.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "WSL",
      "item": "https://dylan127c.github.io/posts/wsl/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "WSL",
  "name": "WSL",
  "description": "概述 Windows Subsystem for Linux（WSL）全称适用于 Linux 的 Windows 子系统。\nWSL 可以让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。详情参考：WSL 文档。\n虚拟化技术 WSL 依赖于虚拟化技术，需要在 Windows 功能中启用 Hyper-V 功能和虚拟机平台功能，请参考：虚拟化技术。\n安装 WSL 与其说是安装 WSL 程序，倒不如说是为 WSL 程序选择安装适合的 Linux 发行版（Linux Distribution）。对于大多数 Windows 10 或以上版本的系统来说，它们都已经默认支持 WSL 了。\n可以通过系统版本的方式，来判断目前系统支持的 WSL 版本有什么。目前 WSL 分为 WSL1 和 WSL2，就性能表现来说，推荐使用 WSL2。\n打开命令提示符 CMD 程序（不能用 PowerShell）运行以下命令：\nver 可以得到当前系统的版本信息：\n如果版本号低于 18917 则表示当前系统只支持 WSL1，如果高于 18917 则表示系统同时支持 WSL1 和 WSL2。\n上述例子中，版本号为 22621 就表示当前系统同时支持 WSL1 和 WSL2。\nWSL 程序默认存储在 C:\\Windows\\System32 目录中：",
  "keywords": [
    "Windows Subsystem", "Virtual Machine", "Linux", "Ubuntu"
  ],
  "articleBody": "概述 Windows Subsystem for Linux（WSL）全称适用于 Linux 的 Windows 子系统。\nWSL 可以让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。详情参考：WSL 文档。\n虚拟化技术 WSL 依赖于虚拟化技术，需要在 Windows 功能中启用 Hyper-V 功能和虚拟机平台功能，请参考：虚拟化技术。\n安装 WSL 与其说是安装 WSL 程序，倒不如说是为 WSL 程序选择安装适合的 Linux 发行版（Linux Distribution）。对于大多数 Windows 10 或以上版本的系统来说，它们都已经默认支持 WSL 了。\n可以通过系统版本的方式，来判断目前系统支持的 WSL 版本有什么。目前 WSL 分为 WSL1 和 WSL2，就性能表现来说，推荐使用 WSL2。\n打开命令提示符 CMD 程序（不能用 PowerShell）运行以下命令：\nver 可以得到当前系统的版本信息：\n如果版本号低于 18917 则表示当前系统只支持 WSL1，如果高于 18917 则表示系统同时支持 WSL1 和 WSL2。\n上述例子中，版本号为 22621 就表示当前系统同时支持 WSL1 和 WSL2。\nWSL 程序默认存储在 C:\\Windows\\System32 目录中：\n可以看到该程序的企鹅图标是 Linux 系统的标志之一。\n虽然 WSL 程序已存在于系统目录中，但尚未可用，直接调用往往只能看到一个一闪而过的终端窗口。\n因为执行 wsl.exe 程序时，它需要启动其默认选择的 Linux 发行版系统。但系统中尚未安装部署过任何的 Linux 发行版，因此直接调用 wsl.exe 程序暂时是没用的。\n或者可以将 WSL 理解为连接 Windows 系统和 Linux 系统的桥梁工具，使用它是为了在 Windows 上建立与 Linux 系统的高效连接。显然，现在 Windows 系统和 WSL 程序都已准备妥当，差的只有 Linux 系统了。\n使用 WSL2 版本 WSL2 相较于 WSL1 拥有更好的性能，对于新安装的 Linux 发行版来说，建议使用 WSL2。系统默认使用的 WSL 版本没办法直接进行查询，建议运行版本设置命令，以确保后续使用的都是 WSL2 版本。\n需要确保 Linux 发行版使用的是 WSL2 版本，需运行以下命令：\nwsl --set-default-version 2 只要运行一次，那么后续默认安装或新安装的 Linux 发行版都会使用 WSL2。\n安装 Linux 发行版 官方所提供的安装 WSL 的文档，实际并不是真正意义上的安装 WSL。与其说是安装 WSL，不如说是将指定的 Linux 发行版部署在本地，使得 WSL 能使用它。\n运行以下命令，默认会将名为 Ubuntu 的 Linux 发行版部署在本地：\nwsl --install 该命令实际等同于：\nwsl --install --distribution Ubuntu 从命令的形式看，不难得知目标 Linux 发行版是可选的。事情确实如此，所有受 WSL 支持的目标 Linux 发行版，都可以通过在线查询的方式获取。\n运行以下命令，可以得到当前所有受支持的 Linux 发行版列表：\nwsl --list --online 需要注意，该命令本质是从网络上拉取列表。如果网络不好，则可能出现错误提示（不要慌，再试一次）：\n可以看到默认安装的 Ubuntu 发行版也存在于列表中。\n如果不希望使用默认的 Ubuntu 发行版，可以在安装时使用 –distrubution 或 -d 选项，指定其中一个受支持的发行版的名字。例如安装 Ubuntu-22.04 发行版：\nwsl --install -d Ubuntu-22.04 这个命令同时也用于部署其他的 Linux 发行版，使用该命令可以将多个不同的 Linux 发行版部署在本地。\n查看 Linux 发行版 运行以下命令，可以查看所有已部署的 linux 发行版信息：\nwsl --list --verbose 其中，NAME 即为对应 Linux 发行版的名称，STATE 表示该系统是否运行中，VERSION 表示其使用的 WSL 版本。\n默认 Linux 发行版 查看 Linux 发行版信息后，不难留意到位于 NAME 之前的 * 标志。它表示当前执行 wsl.exe 程序时，默认使用的 Linux 发行版系统。\n例如上述例子中，默认启动的 Linux 系统是 Ubuntu-22.04，这意味着直接执行 wsl.exe 程序，就会间接启动并使用 Ubuntu-22.04 系统。\n进入 wsl.exe 程序后，执行以下命令可以查询 Ubuntu 系统的版本号：\nlsb_release -a 运行以下命令，可以更改默认启动的 Linux 发行版：\nwsl --set-default 以上例子中需要运行命令：\nwsl --set-default Ubuntu-20.04 可以看到默认使用的发行版已改变，再次打开 WSL 可以查看到版本信息改变：\n这意味着默认使用的 Linux 系统也改变了。\n更改 WSL 版本 如果一开始并没有执行 WSL2 默认版本的配置，即没有执行以下命令：\nwsl --set-default-version 2 那么查看当前所有已部署的 Linux 发行版时，可能就会出现 VERSION 为 1 的情况：\n可以看当前 Ubuntu-22.04 发行版使用的是 WSL1，所幸这并非无可挽救。\n运行以下命令，可更改当前已部署的 Linux 发行版所使用 WSL 版本：\nwsl --set-version 以上例子中需要运行命令：\nwsl --set-version Ubuntu-22.04 2 WSL 版本的转换需要一定的时间：\n转换完毕后，可查看到对应 Linux 发行版所使用的 WSL 版本已变更：\n备份 Linux 发行版 使用虚拟系统的最大优点，即系统的可恢复性。WSL 提供了方便的导入/导出发行版的命令，可随时将 Linux 系统导出为 .tar 文件，或将 .tar 文件恢复成 Linux 系统。\n以下命令用于导出 Linux 发行版：\nwsl --export 以下命令用于导出 Linux 发行版：\nwsl --import 以 Ubuntu-22.04 为例，需要将它导出则运行以下命令：\nwsl --export Ubuntu-22.04 C:\\Ubuntu-22.04.tar 后续需要将 Ubuntu-22.04 重新导入，则运行以下命令：\nwsl --import My-Ubuntu I:\\Virtual-Machine C:\\Ubuntu-22.04.tar 导入的 Linux 发行版会以指定的名字，出现在当前可运行的发行版列表中：\n卸载 Linux 发行版 假如不再需要使用某个 Linux 发行版，或需要删除当前的 Linux 发行版重新安装导入其他的同名发行版时，就需要使用到卸载或注销 Linux 发行版的命令。\n以下命令用于卸载或注销指定名称的 Linux 发行版：\nwsl --unregister 以 My-Ubuntu 发行版为例，卸载它需要运行命令：\nwsl --unregister My-Ubuntu 卸载或注销操作会一并将相关的文件删除，不存在文件冗余的情况。\n其他 WSL 操作 以下命令用于更新 WSL：\nwsl --update 该命令有一个可选的 –web-download 参数，使用它表示从 GitHub 下载更新，而不是从 Microsoft Store 下载。\n以下命令用于关闭 WSL：\nwsl --shutdown 该命令会立即终止所有正在运行的发行版和 WSL 2 轻量级实用工具虚拟机。\n如果只需要终止指定的发行版或阻止其运行，可以使用以下命令：\nwsl --terminate 例如终止 Ubuntu-20.04 发行版的运行：\nwsl --terminate Ubuntu-20.04 实际上，退出发行版 Bash 之后，发行版会自行退出。但存在一种情况，会让发行版开机时自启。\n访问 Linux 文件 如果要从 Windows 访问 Linux 文件，可通过以下路径进行访问：\n\\\\wsl$\\ 以 Ubuntu-20.04 为例，需要访问它的内部文件，直接访问以下路径即可：\n\\\\wsl$\\Ubuntu-20.04 Linux 发行版的虚拟驱动器通常名为 ext4.vhdx 且被存储在 AppData 内相关的 WSL 目录中，而这种虚拟驱动器通常可以被挂载。\n不过官方不建议使用 Windows 工具或编辑器修改、移动或访问 AppData 目录中的 WSL 相关文件。以上使用路径访问 Linux 文件的方式，是官方所推荐的访问形式。\n但该形式存在一个问题，Linux 发行版在不使用时总是处于 Stopped 状态：\n而每次访问 Linux 文件时，如果目标发行版处于 Stopped 状态，则 WSL 需要先将其启动，之后才能允许访问。换言之，如果目标 Linux 发行版尚未启动，那么直接访问 Linux 文件时就会有一定的卡顿发生。\n自启 Linux 发行版 WSL 实则并未提供任何的方法，能让 Linux 发行版随开机启动。但实则可以利用访问 Linux 文件时的特定，间接让指定的 Linux 发行版随开机启动。\n方法就是将访问指定 Linux 发行版的链接，映射为网络驱动器：\n添加完毕后，电脑中会出现该 Linux 发行版的网络位置：\n使用命令行查看所有 Linux 发行版的状态：\nwsl --list --verbose 不难发现 Ubuntu-22.04 发行版会一直处于 Running 状态。\n由于重启计算机后，网络位置也会重新连接，即表示对应的 Linux 发行版需要先行启动，自此间接达成了自启 Linux 发行版的目的。\n修改 root 密码 默认情况下，WSL 中的 Linux 发行版系统内 root 用户没有密码保护。但这并不意味着使用 root 权限时不需要提供密码，为了便于使用，我们需要将 root 密码进行变更。\n当 WSL 中的 Linux 发行版系统用户第一次修改账户密码时，该密码会同时作为 root 用户的新密码。\n进入 Linux 系统中执行以下命令修改当前用户的密码：\nsudo passwd 修改完毕后，该密码即作为 root 用户的新密码。\n将用户切换为 root 使用以下命令：\nsu root 显示当前用户名称，使用以下命令：\nwhoami 切换 root 用户测试密码可用性：\n显然，root 用户的密码已成功变更。\n",
  "wordCount" : "520",
  "inLanguage": "en",
  "datePublished": "2023-04-23T00:00:00Z",
  "dateModified": "2023-04-23T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "dylan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dylan127c.github.io/posts/wsl/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Think",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dylan127c.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://dylan127c.github.io/" accesskey="h" title="Think (Alt + H)">Think</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://dylan127c.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://dylan127c.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://dylan127c.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://dylan127c.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://dylan127c.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://dylan127c.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      WSL
    </h1>
    <div class="post-meta"><span title='2023-04-23 00:00:00 +0000 UTC'>April 23, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;dylan

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="概述">概述</a></li>
                <li>
                    <a href="#%e8%99%9a%e6%8b%9f%e5%8c%96%e6%8a%80%e6%9c%af" aria-label="虚拟化技术">虚拟化技术</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-wsl" aria-label="安装 WSL">安装 WSL</a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-wsl2-%e7%89%88%e6%9c%ac" aria-label="使用 WSL2 版本">使用 WSL2 版本</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-linux-%e5%8f%91%e8%a1%8c%e7%89%88" aria-label="安装 Linux 发行版">安装 Linux 发行版</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b-linux-%e5%8f%91%e8%a1%8c%e7%89%88" aria-label="查看 Linux 发行版">查看 Linux 发行版</a></li>
                <li>
                    <a href="#%e9%bb%98%e8%ae%a4-linux-%e5%8f%91%e8%a1%8c%e7%89%88" aria-label="默认 Linux 发行版">默认 Linux 发行版</a></li>
                <li>
                    <a href="#%e6%9b%b4%e6%94%b9-wsl-%e7%89%88%e6%9c%ac" aria-label="更改 WSL 版本">更改 WSL 版本</a></li>
                <li>
                    <a href="#%e5%a4%87%e4%bb%bd-linux-%e5%8f%91%e8%a1%8c%e7%89%88" aria-label="备份 Linux 发行版">备份 Linux 发行版</a></li>
                <li>
                    <a href="#%e5%8d%b8%e8%bd%bd-linux-%e5%8f%91%e8%a1%8c%e7%89%88" aria-label="卸载 Linux 发行版">卸载 Linux 发行版</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96-wsl-%e6%93%8d%e4%bd%9c" aria-label="其他 WSL 操作">其他 WSL 操作</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%ae%bf%e9%97%ae-linux-%e6%96%87%e4%bb%b6" aria-label="访问 Linux 文件">访问 Linux 文件</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%90%af-linux-%e5%8f%91%e8%a1%8c%e7%89%88" aria-label="自启 Linux 发行版">自启 Linux 发行版</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9-root-%e5%af%86%e7%a0%81" aria-label="修改 root 密码">修改 root 密码</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="概述">概述<a hidden class="anchor" aria-hidden="true" href="#概述">#</a></h3>
<p>Windows Subsystem for Linux（WSL）全称适用于 Linux 的 Windows 子系统。</p>
<p>WSL 可以让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。详情参考：<a href="https://learn.microsoft.com/zh-cn/windows/wsl/">WSL 文档</a>。</p>
<h3 id="虚拟化技术">虚拟化技术<a hidden class="anchor" aria-hidden="true" href="#虚拟化技术">#</a></h3>
<p>WSL 依赖于虚拟化技术，需要在 Windows 功能中启用 Hyper-V 功能和虚拟机平台功能，请参考：<a href="../hyper-v-easy-gpu-pv/#%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF">虚拟化技术</a>。</p>
<h3 id="安装-wsl">安装 WSL<a hidden class="anchor" aria-hidden="true" href="#安装-wsl">#</a></h3>
<p>与其说是安装 WSL 程序，倒不如说是为 WSL 程序选择安装适合的 Linux 发行版（Linux Distribution）。对于大多数 Windows 10 或以上版本的系统来说，它们都已经默认支持 WSL 了。</p>
<p>可以通过系统版本的方式，来判断目前系统支持的 WSL 版本有什么。目前 WSL 分为 WSL1 和 WSL2，就性能表现来说，推荐使用 WSL2。</p>
<p>打开命令提示符 CMD 程序（不能用 PowerShell）运行以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ver
</span></span></code></pre></div><p>可以得到当前系统的版本信息：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423074740531.png#center" alt="image-20230423074740531"  />
</p>
<p>如果版本号低于 18917 则表示当前系统只支持 WSL1，如果高于 18917 则表示系统同时支持 WSL1 和 WSL2。</p>
<p>上述例子中，版本号为 22621 就表示当前系统同时支持 WSL1 和 WSL2。</p>
<p>WSL 程序默认存储在 C:\Windows\System32 目录中：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423070627519.png#center" alt="image-20230423070627519"  />
</p>
<p>可以看到该程序的企鹅图标是 Linux 系统的标志之一。</p>
<p>虽然 WSL 程序已存在于系统目录中，但尚未可用，直接调用往往只能看到一个一闪而过的终端窗口。</p>
<p>因为执行 wsl.exe 程序时，它需要启动其默认选择的 Linux 发行版系统。但系统中尚未安装部署过任何的 Linux 发行版，因此直接调用 wsl.exe 程序暂时是没用的。</p>
<p><strong>或者可以将 WSL 理解为连接 Windows 系统和 Linux 系统的桥梁工具，使用它是为了在 Windows 上建立与 Linux 系统的高效连接。显然，现在 Windows 系统和 WSL 程序都已准备妥当，差的只有 Linux 系统了。</strong></p>
<h4 id="使用-wsl2-版本">使用 WSL2 版本<a hidden class="anchor" aria-hidden="true" href="#使用-wsl2-版本">#</a></h4>
<p>WSL2 相较于 WSL1 拥有更好的性能，对于新安装的 Linux 发行版来说，建议使用 WSL2。系统默认使用的 WSL 版本没办法直接进行查询，建议运行版本设置命令，以确保后续使用的都是 WSL2 版本。</p>
<p>需要确保 Linux 发行版使用的是 WSL2 版本，需运行以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --set-default-version <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>只要运行一次，那么后续默认安装或新安装的 Linux 发行版都会使用 WSL2。</p>
<h4 id="安装-linux-发行版">安装 Linux 发行版<a hidden class="anchor" aria-hidden="true" href="#安装-linux-发行版">#</a></h4>
<p>官方所提供的安装 WSL 的文档，实际并不是真正意义上的安装 WSL。与其说是安装 WSL，不如说是将指定的 Linux 发行版部署在本地，使得 WSL 能使用它。</p>
<p>运行以下命令，默认会将名为 Ubuntu 的 Linux 发行版部署在本地：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --install
</span></span></code></pre></div><p>该命令实际等同于：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --install --distribution Ubuntu
</span></span></code></pre></div><p>从命令的形式看，不难得知目标 Linux 发行版是可选的。事情确实如此，所有受 WSL 支持的目标 Linux 发行版，都可以通过在线查询的方式获取。</p>
<p>运行以下命令，可以得到当前所有受支持的 Linux 发行版列表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --list --online
</span></span></code></pre></div><p><img loading="lazy" src="../images/WSL.images/image-20230423072949672.png#center" alt="image-20230423072949672"  />
</p>
<p>需要注意，该命令本质是从网络上拉取列表。如果网络不好，则可能出现错误提示（不要慌，再试一次）：</p>
<p><img loading="lazy" src="../images/WSL.images/Snipaste_2023-04-23_04-31-27.png#center" alt="Snipaste_2023-04-23_04-31-27"  />
</p>
<p>可以看到默认安装的 Ubuntu 发行版也存在于列表中。</p>
<p>如果不希望使用默认的 Ubuntu 发行版，可以在安装时使用 &ndash;distrubution 或 -d 选项，指定其中一个受支持的发行版的名字。例如安装 Ubuntu-22.04 发行版：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --install -d Ubuntu-22.04
</span></span></code></pre></div><p>这个命令同时也用于部署其他的 Linux 发行版，使用该命令可以将多个不同的 Linux 发行版部署在本地。</p>
<h4 id="查看-linux-发行版">查看 Linux 发行版<a hidden class="anchor" aria-hidden="true" href="#查看-linux-发行版">#</a></h4>
<p>运行以下命令，可以查看所有已部署的 linux 发行版信息：</p>
<pre tabindex="0"><code>wsl --list --verbose
</code></pre><p><img loading="lazy" src="../images/WSL.images/image-20230423080316852.png#center" alt="image-20230423080316852"  />
</p>
<p>其中，NAME 即为对应 Linux 发行版的名称，STATE 表示该系统是否运行中，VERSION 表示其使用的 WSL 版本。</p>
<h4 id="默认-linux-发行版">默认 Linux 发行版<a hidden class="anchor" aria-hidden="true" href="#默认-linux-发行版">#</a></h4>
<p>查看 Linux 发行版信息后，不难留意到位于 NAME 之前的 * 标志。它表示当前执行 wsl.exe 程序时，默认使用的 Linux 发行版系统。</p>
<p>例如上述例子中，默认启动的 Linux 系统是 Ubuntu-22.04，这意味着直接执行 wsl.exe 程序，就会间接启动并使用 Ubuntu-22.04 系统。</p>
<p>进入 wsl.exe 程序后，执行以下命令可以查询 Ubuntu 系统的版本号：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>lsb_release -a
</span></span></code></pre></div><p><img loading="lazy" src="../images/WSL.images/image-20230423080934388.png#center" alt="image-20230423080934388"  />
</p>
<p>运行以下命令，可以更改默认启动的 Linux 发行版：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --set-default &lt;distrubution name&gt;
</span></span></code></pre></div><p>以上例子中需要运行命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wsl --set-default Ubuntu-20.04
</span></span></code></pre></div><p><img loading="lazy" src="../images/WSL.images/image-20230423081402029.png#center" alt="image-20230423081402029"  />
</p>
<p>可以看到默认使用的发行版已改变，再次打开 WSL 可以查看到版本信息改变：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423081458738.png#center" alt="image-20230423081458738"  />
</p>
<p>这意味着默认使用的 Linux 系统也改变了。</p>
<h4 id="更改-wsl-版本">更改 WSL 版本<a hidden class="anchor" aria-hidden="true" href="#更改-wsl-版本">#</a></h4>
<p>如果一开始并没有执行 WSL2 默认版本的配置，即没有执行以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --set-default-version <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>那么查看当前所有已部署的 Linux 发行版时，可能就会出现 VERSION 为 1 的情况：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423083115568.png#center" alt="image-20230423083115568"  />
</p>
<p>可以看当前 Ubuntu-22.04 发行版使用的是 WSL1，所幸这并非无可挽救。</p>
<p>运行以下命令，可更改当前已部署的 Linux 发行版所使用 WSL 版本：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --set-version &lt;distribution name&gt; &lt;versionNumber&gt;
</span></span></code></pre></div><p>以上例子中需要运行命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --set-version Ubuntu-22.04 <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>WSL 版本的转换需要一定的时间：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423083533520.png#center" alt="image-20230423083533520"  />
</p>
<p>转换完毕后，可查看到对应 Linux 发行版所使用的 WSL 版本已变更：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423083618536.png#center" alt="image-20230423083618536"  />
</p>
<h4 id="备份-linux-发行版">备份 Linux 发行版<a hidden class="anchor" aria-hidden="true" href="#备份-linux-发行版">#</a></h4>
<p>使用虚拟系统的最大优点，即系统的可恢复性。WSL 提供了方便的导入/导出发行版的命令，可随时将 Linux 系统导出为 .tar 文件，或将 .tar 文件恢复成 Linux 系统。</p>
<p>以下命令用于导出 Linux 发行版：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --export &lt;Distribution Name&gt; &lt;FileName&gt;
</span></span></code></pre></div><p>以下命令用于导出 Linux 发行版：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --import &lt;Distribution Name&gt; &lt;InstallLocation&gt; &lt;FileName&gt;
</span></span></code></pre></div><p>以 Ubuntu-22.04 为例，需要将它导出则运行以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --export Ubuntu-22.04 C:<span style="color:#ae81ff">\U</span>buntu-22.04.tar
</span></span></code></pre></div><p><img loading="lazy" src="../images/WSL.images/image-20230423090510661.png#center" alt="image-20230423090510661"  />
</p>
<p>后续需要将 Ubuntu-22.04 重新导入，则运行以下命令：</p>
<pre tabindex="0"><code>wsl --import My-Ubuntu I:\Virtual-Machine C:\Ubuntu-22.04.tar
</code></pre><p><img loading="lazy" src="../images/WSL.images/image-20230423090906831.png#center" alt="image-20230423090906831"  />
</p>
<p>导入的 Linux 发行版会以指定的名字，出现在当前可运行的发行版列表中：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423091011589.png#center" alt="image-20230423091011589"  />
</p>
<h4 id="卸载-linux-发行版">卸载 Linux 发行版<a hidden class="anchor" aria-hidden="true" href="#卸载-linux-发行版">#</a></h4>
<p>假如不再需要使用某个 Linux 发行版，或需要删除当前的 Linux 发行版重新安装导入其他的同名发行版时，就需要使用到卸载或注销 Linux 发行版的命令。</p>
<p>以下命令用于卸载或注销指定名称的 Linux 发行版：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --unregister &lt;DistributionName&gt;
</span></span></code></pre></div><p>以 My-Ubuntu 发行版为例，卸载它需要运行命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --unregister My-Ubuntu
</span></span></code></pre></div><p><img loading="lazy" src="../images/WSL.images/image-20230423091420664.png#center" alt="image-20230423091420664"  />
</p>
<p>卸载或注销操作会一并将相关的文件删除，不存在文件冗余的情况。</p>
<h4 id="其他-wsl-操作">其他 WSL 操作<a hidden class="anchor" aria-hidden="true" href="#其他-wsl-操作">#</a></h4>
<p>以下命令用于更新 WSL：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --update
</span></span></code></pre></div><p>该命令有一个可选的 &ndash;web-download 参数，使用它表示从 GitHub 下载更新，而不是从 Microsoft Store 下载。</p>
<p>以下命令用于关闭 WSL：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --shutdown
</span></span></code></pre></div><p>该命令会立即终止所有正在运行的发行版和 WSL 2 轻量级实用工具虚拟机。</p>
<p>如果只需要终止指定的发行版或阻止其运行，可以使用以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --terminate &lt;distribution name&gt;
</span></span></code></pre></div><p>例如终止 Ubuntu-20.04 发行版的运行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --terminate Ubuntu-20.04
</span></span></code></pre></div><p>实际上，退出发行版 Bash 之后，发行版会自行退出。但存在一种情况，会让发行版开机时自启。</p>
<h3 id="访问-linux-文件">访问 Linux 文件<a hidden class="anchor" aria-hidden="true" href="#访问-linux-文件">#</a></h3>
<p>如果要从 Windows 访问 Linux 文件，可通过以下路径进行访问：</p>
<pre tabindex="0"><code>\\wsl$\&lt;distribution-name&gt;
</code></pre><p>以 Ubuntu-20.04 为例，需要访问它的内部文件，直接访问以下路径即可：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ae81ff">\\</span>wsl$<span style="color:#ae81ff">\U</span>buntu-20.04
</span></span></code></pre></div><p><img loading="lazy" src="../images/WSL.images/image-20230423092829460.png#center" alt="image-20230423092829460"  />
</p>
<p>Linux 发行版的虚拟驱动器通常名为 ext4.vhdx 且被存储在 AppData 内相关的 WSL 目录中，而这种虚拟驱动器通常可以被挂载。</p>
<p>不过官方不建议使用 Windows 工具或编辑器修改、移动或访问 AppData 目录中的 WSL 相关文件。以上使用路径访问 Linux 文件的方式，是官方所推荐的访问形式。</p>
<p>但该形式存在一个问题，Linux 发行版在不使用时总是处于 Stopped 状态：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423093332898.png#center" alt="image-20230423093332898"  />
</p>
<p>而每次访问 Linux 文件时，如果目标发行版处于 Stopped 状态，则 WSL 需要先将其启动，之后才能允许访问。换言之，如果目标 Linux 发行版尚未启动，那么直接访问 Linux 文件时就会有一定的卡顿发生。</p>
<h3 id="自启-linux-发行版">自启 Linux 发行版<a hidden class="anchor" aria-hidden="true" href="#自启-linux-发行版">#</a></h3>
<p>WSL 实则并未提供任何的方法，能让 Linux 发行版随开机启动。但实则可以利用访问 Linux 文件时的特定，间接让指定的 Linux 发行版随开机启动。</p>
<p>方法就是将访问指定 Linux 发行版的链接，映射为网络驱动器：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423094012724.png#center" alt="image-20230423094012724"  />
</p>
<p>添加完毕后，电脑中会出现该 Linux 发行版的网络位置：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423094119486.png#center" alt="image-20230423094119486"  />
</p>
<p>使用命令行查看所有 Linux 发行版的状态：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>wsl --list --verbose
</span></span></code></pre></div><p><img loading="lazy" src="../images/WSL.images/image-20230423094208011.png#center" alt="image-20230423094208011"  />
</p>
<p>不难发现 Ubuntu-22.04 发行版会一直处于 Running 状态。</p>
<p>由于重启计算机后，网络位置也会重新连接，即表示对应的 Linux 发行版需要先行启动，自此间接达成了自启 Linux 发行版的目的。</p>
<h3 id="修改-root-密码">修改 root 密码<a hidden class="anchor" aria-hidden="true" href="#修改-root-密码">#</a></h3>
<p>默认情况下，WSL 中的 Linux 发行版系统内 root 用户没有密码保护。但这并不意味着使用 root 权限时不需要提供密码，为了便于使用，我们需要将 root 密码进行变更。</p>
<p>当 WSL 中的 Linux 发行版系统用户第一次修改账户密码时，该密码会同时作为 root 用户的新密码。</p>
<p>进入 Linux 系统中执行以下命令修改当前用户的密码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo passwd
</span></span></code></pre></div><p><img loading="lazy" src="../images/WSL.images/image-20230423084627936.png#center" alt="image-20230423084627936"  />
</p>
<p>修改完毕后，该密码即作为 root 用户的新密码。</p>
<p>将用户切换为 root 使用以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su root
</span></span></code></pre></div><p>显示当前用户名称，使用以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>whoami
</span></span></code></pre></div><p>切换 root 用户测试密码可用性：</p>
<p><img loading="lazy" src="../images/WSL.images/image-20230423084836756.png#center" alt="image-20230423084836756"  />
</p>
<p>显然，root 用户的密码已成功变更。</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://dylan127c.github.io/tags/windows-subsystem/">Windows Subsystem</a></li>
      <li><a href="https://dylan127c.github.io/tags/virtual-machine/">Virtual Machine</a></li>
      <li><a href="https://dylan127c.github.io/tags/linux/">Linux</a></li>
      <li><a href="https://dylan127c.github.io/tags/ubuntu/">Ubuntu</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://dylan127c.github.io/posts/bash-themes/">
    <span class="title">Next »</span>
    <br>
    <span>Bash Themes</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://dylan127c.github.io/">Think</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<script type="text/javascript" src="/js/lightgallery.min.js"></script>
<script type="text/javascript" src="/js/lg-zoom.min.js"></script>
<script type="text/javascript" src="/js/lg-thumbnail.min.js"></script>

<script>

    
    var imgElements = document.querySelectorAll(".post-content p>img");
    if (imgElements.length > 0) {
        for (var i = 0; i < imgElements.length; i++) {
            var pElement = imgElements[i].parentNode;
            var aElement = document.createElement("a");

            aElement.setAttribute("href", "javascript:void(0)");
            aElement.setAttribute("name", "thumbnail" + i);

            
            aElement.setAttribute("onclick", "activate(this.name)")

            aElement.innerHTML = pElement.innerHTML;
            pElement.parentNode.replaceChild(aElement, pElement);
        }
        
        function activate(id) {
            document.getElementById(id).click();
        }

        
        

        
        var divThumbnail = document.createElement("div");
        divThumbnail.setAttribute("id", "lightgallery");

        
        divThumbnail.style.display = "none";

        
        for (var i = 0; i < imgElements.length; i++) {
            var aElement = document.createElement("a");
            aElement.setAttribute("href", imgElements[i].getAttribute("src"));
            aElement.setAttribute("id", "thumbnail" + i);
            aElement.innerHTML = imgElements[i].outerHTML;
            divThumbnail.appendChild(aElement);
        }
        
        var bodyElement = document.getElementsByTagName("body")[0];
        bodyElement.append(divThumbnail);

        
        lightGallery(divThumbnail, {
            thumbnail: false,
            speed: 500,
            counter: false
        });
    }

    
    var aLinkElement = document.querySelectorAll(".post-content p a")
    for (var i = 0; i < aLinkElement.length; i++) {
        aLinkElement[i].setAttribute("target", "_blank");
    }
    
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
